Ключевые находки
- Бекенд: жёстко забит CORS на `http://localhost:5173`; нет общего миддлвара ошибок; нет кэша и ограничений по частоте; экспорт сервиса записан странно (`export default cryptoApiService = new cryptoApiService()`), лучше разделить класс и инстанс; мало проверок входных данных.
- Фронтенд: `useFetch` без повторов и явных таймаутов; форматирование сумм простое; стор конвертера минимален; таблица топ‑100 без пагинации/поиска; алиасы настроены, маршруты лениво грузятся — это плюс.

Переход на TanStack Query (по шагам)
- День 2: Добавить зависимость и обернуть приложение в `QueryClientProvider`.
- День 3: Создать хуки `useConverterQuery` и `useTop100Query` с базовым кэшем и отключением авто‑рефокуса.
- День 4: Перевести конвертер и топ‑100 с `useFetch` на TanStack Query (использовать кэш и `staleTime`).
- День 5: Включить лёгкий повтор запросов (1–2 раза), аккуратные ошибки; при желании — подключить Devtools.
- День 9: Уточнить стратегии кэширования и рефетча (например, по смене валют и при возврате на вкладку).

Неделя 1

День 1 — Базовая надёжность
- Бекенд: 
[V] Сделать аккуратный экспорт сервиса: отдельный класс и `export const cryptoApi = new CryptoApiService()`.
[V] Ввести общий обработчик ошибок (миддлвар), вернуть одинаковый формат ответа об ошибке. 
- Фронтенд: 
[X] В `useFetch` добавить понятные сообщения об ошибках и показ их через тосты. 
[V] Отобразить состояния загрузки на основных экранах.

День 2 — Настройки и CORS
- Бекенд: 
[X] Перенести адрес фронта в переменные окружения, обновить CORS так, чтобы читать из настроек и поддерживать несколько доменов.
- Фронтенд: 
[X] Вынести `VITE_BASE_BACKEND_URL` в `.env`, проверить сборку с разными адресами БЕ. Установить TanStack Query и обернуть приложение в `QueryClientProvider`.

День 3 — Проверки входных данных
- Бекенд: 
[X] В `/api/converter` и `/api/top100` добавить простую проверку параметров (если появятся), возвращать понятные тексты при ошибке.
- Фронтенд: 
[X] Валидация ввода суммы (использовать `useNumberInput` шире), защита от некорректных значений. 
[X] Создать хуки `useConverterQuery` и `useTop100Query` с едиными опциями (кэш, `staleTime`).

День 4 — Кэш и бережность к внешним API
- Бекенд: 
[X] Кэшировать ответ топ‑100 на 60–120 сек. 
[X] Кэшировать курсы конвертера на 30–60 сек. Это снимет лишние запросы.
- Фронтенд: 
[X] Использовать кэш TanStack Query (`staleTime`, `gcTime`), перевести конвертер и топ‑100 на новые хуки. Проверить, что данные не перезапрашиваются лишний раз.

День 5 — Ограничение частоты и таймауты
- Бекенд: 
[X] Поставить простые лимиты по запросам для публичных маршрутов. 
[X] Проверить таймауты запросов к внешним сервисам и обработку сбоев.
- Фронтенд: 
[X] В TanStack Query включить повтор запроса 1–2 раза при разовом сбое, показать дружелюбные ошибки (тосты), отключить лишний рефетч при фокусе если мешает.

День 6 — Таблица топ‑100: удобство
- Бекенд: 
[X] Подготовить опциональные параметры `page`, `per_page` (на будущее), пока можно игнорировать.
- Фронтенд: 
[X] Добавить постраничный показ или виртуальный список, поиск по названию и сортировку по цене/росту.

День 7 — Документация и мелкие правки
- Бекенд: 
[X] Коротко описать маршруты, примеры ответов и ошибок.
- Фронтенд: 
[X] Отполировать стили и состояния кнопок, проверить адаптив на телефонах.

Неделя 2

День 8 — Чистка структуры
- Бекенд: 
[X] Разнести папки: `routes/`, `service/`, `middleware/`, `utils/`. 
[X] Привести названия и логи к одному виду.
- Фронтенд: 
[X] Наименования в `store/` и `utils/` сделать ровнее, проверить переэкспорты (`@store/index`).

День 9 — Формат чисел и валют
- Бекенд: 
[X] Привести числа к ожидаемым типам и точности в ответах.
- Фронтенд: 
[X] Формат сумм и символов валют (разделители, количество знаков после запятой для фиата/крипты), аккуратно использовать `isFiatCurrency`.
[X] Уточнить `queryKey` (например, учитывать выбранные валюты) и стратегию рефетча.

День 10 — Производительность
- Бекенд: 
[X] Лёгкие метрики в логах: путь, время ответа, код ответа. Посмотреть, что медленно.
- Фронтенд: 
[X] Проверить вес бандла, отложить тяжёлые куски, убедиться, что ленивые страницы работают гладко.

День 11 — Настройки через окружение
- Бекенд: 
[X] Все адреса внешних сервисов, ключи, кэш‑тайминги читать из переменных окружения. Описать их список.
- Фронтенд: 
[X]В `.env` зафиксировать ключевые переменные, описать их в `README`.

День 12 — Тесты на важные места
- Бекенд: 
[X] Пара простых тестов на сервис курсов и топ‑100 (успех/ошибка).
- Фронтенд: 
[X] Тесты на логику конвертации и парсинг ответа (без фанатизма, только критичное).

День 13 — Совместная проверка
[X] Пройтись по всем сценариям: конвертер, топ‑100, ошибки сети. Собрать мелкие баги и закрыть их.

День 14 — Итоги и планы дальше
[X] Обновить документацию, перечислить узкие места и идеи на следующую итерацию (например, избранные монеты, графики, локализация, тёмная тема).

Заметки
- Двигаться небольшими шагами, но каждый день приносить пользу.
- Соблюдать единый стиль кода и ответов сервера.
- Ошибки должны быть понятны и пользователю, и нам в логах.

